(function(c){c.uiwidget=c.uiwidget||{};c.uiwidget.Drag=function(b,a){c.extend(this,a);this.el=c(b);this.setup()};c.uiwidget.Drag.prototype={handler:null,helper:null,setup:function(){this.handler=this.handler||this.el;this.el.css("position","absolute");this.el.css("z-index",c.uiwidget.Drag.z_index++);this.getHelper().css("cursor","move");this.handler.bind("mousedown",this,this.onMouseDown)},getHelper:function(){if(!this.helper){c(document.body).append('<div id="dragHelper" unselectable=on style="background-color: transparent;position:absolute;display:none:cursor:move;border:2px dotted #bbb;mozUserSelect:none;z-index:10000000001;left:-1000px;top:-1000px;"></div>');
this.helper=c("#dragHelper")}return this.helper},onMouseDown:function(b){var a=b.data;a.el.css("z-index",c.uiwidget.Drag.z_index++);a._x=b.pageX-a.el.offset().left;a._y=b.pageY-a.el.offset().top;a.getHelper().show();a.getHelper().css("visibility","hidden");a.getHelper().height(a.el.height());a.getHelper().width(a.el.width());a.getHelper().css("left",a.el.css("left"));a.getHelper().css("top",a.el.css("top"));c(document).bind("mousemove",a,a.onMouseMove);c(document).bind("mouseup",a,a.onMouseUp)},onMouseMove:function(b){var a=
b.data;a.el.hide();a.getHelper().css("visibility","visible");a.getHelper().css("left",b.pageX-a._x+"px");a.getHelper().css("top",b.pageY-a._y+"px")},onMouseUp:function(b){b=b.data;b.el.css("left",b.getHelper().css("left"));b.el.css("top",b.getHelper().css("top"));b.el.show();b.getHelper().css("visibility","hidden");c(document).unbind("mousemove");c(document).unbind("mouseup")}};c.uiwidget.Drag.z_index=1E9;c.fn.drag=function(b){return new c.uiwidget.Drag(this,b)}})(jQuery);
